const DB = {
  transactions: [
    {
      "amount": "$452.56",
      "description": "nostrud aute eu",
      "category": "house",
      "created_at": "2014-03-29T12:17:06+04:00",
      "updated_at": "2018-12-05T08:19:07+05:00"
    },
    {
      "amount": "$108.70",
      "description": "do magna sint",
      "category": "house",
      "created_at": "2020-04-17T05:23:05+04:00",
      "updated_at": "2020-12-21T05:17:13+05:00"
    },
    {
      "amount": "$396.61",
      "description": "eu nulla exercitation",
      "category": "salary",
      "created_at": "2018-05-18T05:24:19+04:00",
      "updated_at": "2014-12-08T01:54:35+05:00"
    },
    {
      "amount": "$801.50",
      "description": "do excepteur aliquip",
      "category": "salary",
      "created_at": "2020-04-21T08:34:20+04:00",
      "updated_at": "2018-02-06T06:13:28+05:00"
    },
    {
      "amount": "$252.10",
      "description": "duis enim amet",
      "category": "salary",
      "created_at": "2020-02-06T08:15:12+05:00",
      "updated_at": "2016-02-02T10:26:38+05:00"
    },
    {
      "amount": "$486.22",
      "description": "et sint laborum",
      "category": "other",
      "created_at": "2018-11-09T03:51:03+05:00",
      "updated_at": "2014-11-22T12:49:47+05:00"
    },
    {
      "amount": "$787.00",
      "description": "non irure enim",
      "category": "other",
      "created_at": "2015-09-14T06:01:49+04:00",
      "updated_at": "2017-07-08T11:57:04+04:00"
    },
    {
      "amount": "$773.89",
      "description": "laboris ullamco labore",
      "category": "food",
      "created_at": "2015-01-04T10:34:25+05:00",
      "updated_at": "2018-10-29T07:42:54+04:00"
    },
    {
      "amount": "$41.92",
      "description": "dolor excepteur amet",
      "category": "salary",
      "created_at": "2017-12-25T08:12:29+05:00",
      "updated_at": "2015-04-11T09:41:36+04:00"
    },
    {
      "amount": "$827.57",
      "description": "nisi excepteur do",
      "category": "food",
      "created_at": "2018-01-09T08:39:41+05:00",
      "updated_at": "2014-09-06T06:24:42+04:00"
    },
    {
      "amount": "$762.94",
      "description": "cupidatat fugiat velit",
      "category": "transport",
      "created_at": "2015-07-23T07:42:37+04:00",
      "updated_at": "2016-12-04T11:17:06+05:00"
    },
    {
      "amount": "$277.05",
      "description": "fugiat mollit aliqua",
      "category": "transport",
      "created_at": "2018-08-30T12:37:23+04:00",
      "updated_at": "2019-11-04T09:12:43+05:00"
    },
    {
      "amount": "$341.31",
      "description": "cillum est laborum",
      "category": "other",
      "created_at": "2016-04-13T07:38:11+04:00",
      "updated_at": "2017-05-28T01:58:17+04:00"
    },
    {
      "amount": "$70.72",
      "description": "ullamco mollit id",
      "category": "house",
      "created_at": "2017-07-03T04:20:19+04:00",
      "updated_at": "2017-11-12T04:50:50+05:00"
    },
    {
      "amount": "$822.82",
      "description": "nostrud culpa sit",
      "category": "salary",
      "created_at": "2018-04-28T09:49:06+04:00",
      "updated_at": "2014-08-30T05:57:38+04:00"
    },
    {
      "amount": "$312.41",
      "description": "enim qui nisi",
      "category": "food",
      "created_at": "2018-02-05T01:39:52+05:00",
      "updated_at": "2019-10-31T10:49:37+04:00"
    },
    {
      "amount": "$333.37",
      "description": "anim exercitation duis",
      "category": "food",
      "created_at": "2019-10-30T01:33:46+04:00",
      "updated_at": "2015-03-29T09:19:12+04:00"
    },
    {
      "amount": "$145.43",
      "description": "commodo amet ut",
      "category": "house",
      "created_at": "2014-06-25T01:03:24+04:00",
      "updated_at": "2018-03-28T02:29:30+04:00"
    },
    {
      "amount": "$660.27",
      "description": "incididunt excepteur dolor",
      "category": "house",
      "created_at": "2014-06-03T02:17:05+04:00",
      "updated_at": "2016-07-25T05:54:50+04:00"
    },
    {
      "amount": "$668.98",
      "description": "ipsum nulla voluptate",
      "category": "salary",
      "created_at": "2019-09-24T10:32:56+04:00",
      "updated_at": "2017-01-11T12:41:48+05:00"
    },
    {
      "amount": "$875.73",
      "description": "minim reprehenderit veniam",
      "category": "food",
      "created_at": "2016-09-04T11:01:30+04:00",
      "updated_at": "2014-10-16T01:41:40+04:00"
    },
    {
      "amount": "$14.02",
      "description": "tempor aute quis",
      "category": "transport",
      "created_at": "2014-03-10T07:40:24+04:00",
      "updated_at": "2019-09-17T02:54:29+04:00"
    },
    {
      "amount": "$776.27",
      "description": "occaecat anim labore",
      "category": "salary",
      "created_at": "2018-03-08T04:06:58+05:00",
      "updated_at": "2015-04-15T06:59:31+04:00"
    },
    {
      "amount": "$817.46",
      "description": "labore laborum enim",
      "category": "salary",
      "created_at": "2021-04-11T12:45:50+04:00",
      "updated_at": "2016-05-25T02:35:42+04:00"
    },
    {
      "amount": "$274.31",
      "description": "amet consectetur est",
      "category": "food",
      "created_at": "2014-10-07T03:39:55+04:00",
      "updated_at": "2019-10-13T10:12:50+04:00"
    },
    {
      "amount": "$628.24",
      "description": "laboris quis amet",
      "category": "salary",
      "created_at": "2015-05-17T08:10:04+04:00",
      "updated_at": "2015-01-07T06:57:07+05:00"
    },
    {
      "amount": "$195.88",
      "description": "proident nisi deserunt",
      "category": "other",
      "created_at": "2021-01-16T10:55:32+05:00",
      "updated_at": "2014-06-21T08:53:30+04:00"
    },
    {
      "amount": "$792.78",
      "description": "amet non sunt",
      "category": "other",
      "created_at": "2020-05-07T09:53:21+04:00",
      "updated_at": "2017-06-11T02:26:44+04:00"
    },
    {
      "amount": "$437.59",
      "description": "do irure dolor",
      "category": "transport",
      "created_at": "2016-11-30T04:23:14+05:00",
      "updated_at": "2016-04-11T06:15:47+04:00"
    },
    {
      "amount": "$822.80",
      "description": "ex sit nulla",
      "category": "other",
      "created_at": "2019-07-22T02:09:50+04:00",
      "updated_at": "2014-01-20T06:25:04+05:00"
    },
    {
      "amount": "$810.66",
      "description": "nulla aliquip elit",
      "category": "salary",
      "created_at": "2015-01-21T09:13:55+05:00",
      "updated_at": "2021-04-10T05:48:39+04:00"
    },
    {
      "amount": "$579.62",
      "description": "quis amet elit",
      "category": "other",
      "created_at": "2017-03-26T06:54:06+04:00",
      "updated_at": "2018-06-18T08:42:33+04:00"
    },
    {
      "amount": "$829.57",
      "description": "adipisicing laborum velit",
      "category": "food",
      "created_at": "2015-02-27T11:03:09+05:00",
      "updated_at": "2020-01-15T05:51:10+05:00"
    },
    {
      "amount": "$138.03",
      "description": "velit commodo anim",
      "category": "transport",
      "created_at": "2015-10-28T09:36:39+04:00",
      "updated_at": "2014-01-27T07:57:05+05:00"
    },
    {
      "amount": "$616.58",
      "description": "proident esse reprehenderit",
      "category": "salary",
      "created_at": "2016-09-21T08:26:57+04:00",
      "updated_at": "2021-03-08T04:26:55+05:00"
    },
    {
      "amount": "$70.59",
      "description": "labore dolore ad",
      "category": "transport",
      "created_at": "2018-06-26T12:45:34+04:00",
      "updated_at": "2014-09-28T06:41:15+04:00"
    },
    {
      "amount": "$43.56",
      "description": "Lorem officia nulla",
      "category": "food",
      "created_at": "2020-11-09T09:36:00+05:00",
      "updated_at": "2020-08-15T06:26:00+04:00"
    },
    {
      "amount": "$568.64",
      "description": "fugiat labore do",
      "category": "house",
      "created_at": "2018-06-03T11:07:43+04:00",
      "updated_at": "2018-06-17T03:44:33+04:00"
    },
    {
      "amount": "$271.36",
      "description": "pariatur pariatur anim",
      "category": "transport",
      "created_at": "2017-01-16T11:18:25+05:00",
      "updated_at": "2016-06-14T11:25:40+04:00"
    },
    {
      "amount": "$121.83",
      "description": "commodo mollit est",
      "category": "house",
      "created_at": "2020-12-30T07:51:43+05:00",
      "updated_at": "2014-09-04T07:27:46+04:00"
    }
  ],
};

class TransactionRepository {
  constructor(model) {
    this.model = model;
  }

  filter(params) {
    let query = DB[this.model];
    if (params.filter) {
      query = query.filter(entity => entity.category === params.filter);
    }

    if (params.search) {
      const strRegExPattern = `.*${params.search}.*`;

      query = query.filter(entity => {
        return entity.amount.match(new RegExp(strRegExPattern))
          || entity.description.match(new RegExp(strRegExPattern, 'g'));
      });
    }

    return query;
  }
}

module.exports = TransactionRepository;